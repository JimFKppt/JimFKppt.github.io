---
title: 配置Yum源
date: 2022-04-17 19:20:20
permalink: /pages/544d08/
tags:
  - 
---
## 情景

安装A软件无法成功，终端提示“安装A软件之前，需要先安装B软件”，于是安装B软件，终端又提示“安装B软件之前，需要先安装C软件”......

咋办？

配置yum本地源：一次解决所有软件包之间的依赖关系。

## Yum

Yum（Yellow dog Updater, Modified）是由Duke University团队修改Yellow Dog Linux的Yellow Dog Updater开发而成，是一个基于RPM包管理的字符前端软件包管理器。能够从指定的服务器自动下载RPM包并且安装，可以处理依赖性关系，并且一次安装所有依赖的软件包，无须繁琐地一次次下载、安装。

## 配置yum源

## 测试能否通过rpm正常安装软件

以 `httpd` 这个软件为例：

```shell
# rpm -i ./httpd-2.4.6-95.el7.centos.x86_64.rpm 

warning: ./httpd-2.4.6-95.el7.centos.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID f4a80eb5: NOKEY
error: Failed dependencies:
	/etc/mime.types is needed by httpd-2.4.6-95.el7.centos.x86_64
	httpd-tools = 2.4.6-95.el7.centos is needed by httpd-2.4.6-95.el7.centos.x86_64
	libapr-1.so.0()(64bit) is needed by httpd-2.4.6-95.el7.centos.x86_64
	libaprutil-1.so.0()(64bit) is needed by httpd-2.4.6-95.el7.centos.x86_64
```

终端提示 `Failed dependencies` ，缺少**依赖**。

## yum 配置文件

1. 在用户目录下创建一个备份目录 `repoBackup`，用于备份其他的 yum 配置文件
2. 切换目录至 `/etc/yum.repos.d/`
3. `mv` 移动所有 `.repo` 文件放到备份目录下：

```
mv *.repo /etc/home/<userName>/repoBackup/
```

4. 在 `/etc/yum.repos.d/` 目录下创建 `CentOS-Base.repo` 文件

```shell
[newreop]
name = CentOS-new
# name       仓库描述
baseurl = file:///mnt/iso
# baseurl    为软件仓库位置，也可以是线上软件仓库（此处为挂载的光盘）
enabled = 1
# enabled    是否启用这个仓库，1为启用，0为禁用
gpgcheck = 0
# gpgcheck   是否检查GPG签名（主要是用来验证软件包是不是红帽官方的）
```

5. 保存退出。

## 安装软件及其依赖

1. 清除yum缓存：

```shell
yum clean all
```

2. 安装软件：

```shell
yum install <softwareName>
```

3. 查看软件包信息：

```
yum info <sorftwareName>
```
