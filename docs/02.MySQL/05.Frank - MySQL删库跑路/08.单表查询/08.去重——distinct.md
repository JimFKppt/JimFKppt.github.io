---
title: 去重——distinct
date: 2022-05-10 22:30:20
permalink: /pages/425ca1/
tags:
  - 
---
# 去重——distinct

## `all`

一般默认的查询语句都带有 `all`，表示不去重，默认隐藏。

```mysql
select all <FieldName> from <TableName>;
```

## `distinct`

若要对查询结果去重，则使用 `distinct`，不是对针对于某一列，而是所有列

若要统计去重后记录的数量，则使用 `count(distinct <FieldName>)`

```mysql
CREATE TABLE `car`
( `car_id` INT UNSIGNED NOT NULL PRIMARY KEY,
 `name` VARCHAR(20),
 `price` DECIMAL(8,2)
);

INSERT INTO CAR (`car_id`, `name`, `price`) VALUES (1, 'Audi A1', '20000');
INSERT INTO CAR (`car_id`, `name`, `price`) VALUES (2, 'Audi A1', '15000');
INSERT INTO CAR (`car_id`, `name`, `price`) VALUES (3, 'Audi A2', '40000');
INSERT INTO CAR (`car_id`, `name`, `price`) VALUES (4, 'Audi A2', '40000');

SELECT DISTINCT `name`, `price` FROM CAR;

+---------+----------+
| name    | price    |
+---------+----------+
| Audi A1 | 20000.00 |
| Audi A1 | 15000.00 |
| Audi A2 | 40000.00 |
+---------+----------+
```



## Example

```mysql
+----+--------+------+--------+---------+
| id | name   | age  | gender | address |
+----+--------+------+--------+---------+
|  1 | 张伟   |   25 | 男     | 上海    |
|  2 | 李星   |   30 | 男     | 武汉    |
|  3 | 陈晓   |   23 | 女     | 北京    |
|  4 | 姚蓝   |   34 | 男     | 上海    |
|  5 | 朱隶   |   42 | 男     | 北京    |
|  6 | 张小雨 |   24 | 女     | 上海    |
|  7 | 丁雪雪 |   21 | 女     | 北京    |
|  8 | 万娇娇 |   18 | 女     | 武汉    |
|  9 | 余苗苗 |   19 | 女     | 上海    |
+----+--------+------+--------+---------+
```

### 不去重 `all`

```mysql
select all address from manager;
# select address from manager;
```

```mysql
+---------+
| address |
+---------+
| 上海    |
| 武汉    |
| 北京    |
| 上海    |
| 北京    |
| 上海    |
| 北京    |
| 武汉    |
| 上海    |
+---------+
```

### 去重 `distinct`

```mysql
select distinct address from manager;
```

```mysql
+---------+
| address |
+---------+
| 上海    |
| 武汉    |
| 北京    |
+---------+
```

### 统计去重后的数量

```mysql
select count(distinct address) as '城市数量' from manager;
```

```mysql
+----------+
| 城市数量 |
+----------+
|        3 |
+----------+
```

