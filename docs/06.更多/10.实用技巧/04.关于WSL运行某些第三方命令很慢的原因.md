---
title: 关于WSL运行某些第三方命令很慢的原因
date: 2022-09-22 23:05:58
permalink: /pages/9c98db/
titleTag: 原创
sticky: 1
categories: 
  - 实用技巧
tags:
  - WSL
author:
  name: Jim
---
# 关于WSL运行某些第三方命令很慢的原因

在 WSL 上运行第三方软件，比如命令纠错软件 `thefuck`，速度极其之慢。

这很有可能是因为WSL会同步 Windows 系统本身的环境变量，这使 WSL 的 `PATH` 路径变得非常非常长，新追加到最后的路径需要等前面的路径都检索完后才能被检索。

```
echo $PATH  # 显示PATH变量
```

:::tip

当然也只是我的猜测。另一种可能是访问检索那些Windows系统自身的环境变量导致速度变慢。

:::

要想解决这个问题，就要关闭 WSL 同步 Windows 环境变量的功能。

## 解决方案

https://github.com/microsoft/WSL/issues/1640#issuecomment-616887435

无需尝试摆弄路径或注册表，只需禁用该功能即可。

in WSL:

```
sudo vi /etc/wsl.conf
```

add:

```
[interop]
appendWindowsPath = false
```

然后在Windows中找到您的发行版名称并终止它，以便获取配置更改：

```
wsl.exe --list
wsl.exe --terminate <distro_name>
```

重启启动 WSL 即可。