(window.webpackJsonp=window.webpackJsonp||[]).push([[350],{851:function(s,t,e){"use strict";e.r(t);var a=e(21),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[s._v("参考：https://iter01.com/688100.html")]),s._v(" "),e("h2",{attrs:{id:"遭遇问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#遭遇问题"}},[s._v("#")]),s._v(" 遭遇问题")]),s._v(" "),e("p",[s._v("Git push 到GitHub仓库时失败：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ssh: connect to host github.com port 22: Connection refused\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"查找原因"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查找原因"}},[s._v("#")]),s._v(" 查找原因")]),s._v(" "),e("p",[s._v("测试")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ssh -T git@github.com\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[e("code",[s._v("ssh -T user@host")]),s._v("命令通常用于测试连接情况。")])]),s._v(" "),e("p",[s._v("详细日志（上面的命令加个选项"),e("code",[s._v("-v")]),s._v("）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ssh -vT git@github.com\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("ul",[e("li",[e("code",[s._v("-v")]),s._v("表示verbose，會打出详细日志。")]),s._v(" "),e("li",[e("code",[s._v("-T")]),s._v("表示Disable pseudo-tty allocation，连接禁止分配伪终端（当用ssh或telnet等登录系统时，系统分配给我们的终端就是伪终端。）。")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ ssh -vT git@github.com\nOpenSSH_9.0p1, OpenSSL 1.1.1o  3 May 2022\ndebug1: Reading configuration data /etc/ssh/ssh_config\ndebug1: Connecting to github.com [::1] port 22.\ndebug1: connect to address ::1 port 22: Connection refused\ndebug1: Connecting to github.com [127.0.0.1] port 22.\ndebug1: connect to address 127.0.0.1 port 22: Connection refused\nssh: connect to host github.com port 22: Connection refused\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("blockquote",[e("p",[s._v("從上面的資訊馬上就發現了詭異的地方，連線github.com的地址居然是"),e("code",[s._v("::1")]),s._v("和"),e("code",[s._v("127.0.0.1")]),s._v("。前者是IPV6的localhost地址，後者是IPV4的localhost地址。")]),s._v(" "),e("p",[s._v("到這裡問題就很明確了，是DNS解析出問題了，導致github.com域名被解析成了localhost的ip地址，就自然連不上GitHub了。")]),s._v(" "),e("p",[s._v("Windows下執行"),e("code",[s._v("ipconfig /flushdns")]),s._v(" 清楚DNS快取後也沒用，最後修改hosts檔案，增加一條github.com的域名對映搞定。")]),s._v(" "),e("p",[s._v("https://iter01.com/688100.html")])]),s._v(" "),e("h2",{attrs:{id:"解决方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[s._v("#")]),s._v(" 解决方案")]),s._v(" "),e("p",[s._v("方案一：更换"),e("code",[s._v("22")]),s._v("端口为"),e("code",[s._v("443")])]),s._v(" "),e("p",[s._v("方案二：在系统"),e("code",[s._v("hosts")]),s._v("文件中添加IP和域名映射")]),s._v(" "),e("blockquote",[e("p",[s._v("如果使用了其中一个方案还存在某些问题的话，可以考虑两个方案可同时使用。")])]),s._v(" "),e("h3",{attrs:{id:"方案一-更换22端口为443"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#方案一-更换22端口为443"}},[s._v("#")]),s._v(" 方案一 更换"),e("code",[s._v("22")]),s._v("端口为"),e("code",[s._v("443")])]),s._v(" "),e("p",[s._v("在"),e("code",[s._v("./ssh")]),s._v("下的"),e("code",[s._v("config")]),s._v("文件（如无该文件则新建即可）中添加如下内容：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("Host github.com\n  Hostname ssh.github.com\n  Port 443\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"方案二-在系统hosts文件中添加ip和域名映射"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#方案二-在系统hosts文件中添加ip和域名映射"}},[s._v("#")]),s._v(" 方案二 在系统"),e("code",[s._v("hosts")]),s._v("文件中添加IP和域名映射")]),s._v(" "),e("p",[s._v("查询 "),e("code",[s._v("github.com")]),s._v(" IP地址")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("nslookup github.com 8.8.8.8\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[e("code",[s._v("8.8.8.8")]),s._v("是Google的DNS伺服器地址")])]),s._v(" "),e("p",[s._v("或者使用https://www.ipaddress.com/网站查询IP地址")]),s._v(" "),e("p",[s._v("打开本机"),e("code",[s._v("hosts")]),s._v("文件，追加一条映射：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("140.82.114.3    github.com\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[s._v("Windows 的 "),e("code",[s._v("hosts")]),s._v(" 文件在 "),e("code",[s._v("C:\\Windows\\System32\\drivers\\etc")]),s._v(" 路径下。")])]),s._v(" "),e("h2",{attrs:{id:"测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[s._v("#")]),s._v(" 测试")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ssh -T git@github.com\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("若得出如下结果，则成功解决该问题：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("Hi JimFKppt! You've successfully authenticated, but GitHub does not provide shell access.\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"github-com-dns解析污染导致-ssh-无法连接到-github"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#github-com-dns解析污染导致-ssh-无法连接到-github"}},[s._v("#")]),s._v(" "),e("code",[s._v("github.com")]),s._v(" DNS解析污染导致 SSH 无法连接到 GitHub")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ssh: connect to host github.com port 22: Connection refused\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("DNS解析污染有两种可能的原因：")]),s._v(" "),e("ul",[e("li",[s._v("DNS解析被运营商劫持")]),s._v(" "),e("li",[s._v("用了科学上网")])])])}),[],!1,null,null,null);t.default=n.exports}}]);