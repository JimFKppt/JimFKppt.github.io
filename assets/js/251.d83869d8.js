(window.webpackJsonp=window.webpackJsonp||[]).push([[251],{750:function(s,e,a){"use strict";a.r(e);var n=a(21),t=Object(n.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"外键如何设定置空和级联操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#外键如何设定置空和级联操作"}},[s._v("#")]),s._v(" 外键如何设定"),a("code",[s._v("置空")]),s._v("和"),a("code",[s._v("级联")]),s._v("操作？")]),s._v(" "),a("blockquote",[a("p",[s._v("置空和级联一般在创建表时进行设置。")])]),s._v(" "),a("h3",{attrs:{id:"关键字"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关键字"}},[s._v("#")]),s._v(" 关键字")]),s._v(" "),a("p",[s._v("在删除的时候："),a("code",[s._v("on delete")])]),s._v(" "),a("p",[s._v("在更新的时候："),a("code",[s._v("on update")])]),s._v(" "),a("p",[s._v("置空："),a("code",[s._v("set null")])]),s._v(" "),a("p",[s._v("级联："),a("code",[s._v("cascade")])]),s._v(" "),a("h3",{attrs:{id:"创建主表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建主表"}},[s._v("#")]),s._v(" 创建主表")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("create table if not exists student(\n\tstu_id int primary key auto_increment comment 'student表主键stu_id',\n\tname varchar(30) comment '学生姓名name'\n\t);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ol",[a("li",[a("p",[s._v("插入数据到"),a("code",[s._v("student")]),s._v("表")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("insert into student values\n    (null, 'Jim'),\n    (null, 'Tom'),\n    (null, 'Anna'),\n    (null, 'Emma');\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("查询"),a("code",[s._v("student")]),s._v("表")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("+--------+------+\n| stu_id | name |\n+--------+------+\n|      1 | Jim  |\n|      2 | Tom  |\n|      3 | Anna |\n|      4 | Emma |\n+--------+------+\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"创建子表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建子表"}},[s._v("#")]),s._v(" 创建子表")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("create table if not exists eatery_order(\n\tid int primary key auto_increment comment 'eatery_order主键',\n\tmoney decimal(10,4) default '0.0' comment '消费金额',\n\tstu_id int comment 'eatery_order表外键',\n\tforeign key (stu_id) references student(stu_id) on delete set null on update cascade\n\t);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h4",{attrs:{id:"关键语句"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关键语句"}},[s._v("#")]),s._v(" 关键语句")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("foreign key (stu_id) references student(stu_id) on delete set null on update cascade\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("解释：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("on delete set null")]),s._v("：在主表删除记录时，本表外键值置空 "),a("code",[s._v("null")])]),s._v(" "),a("li",[a("code",[s._v("on update cascade")]),s._v("：在主表更新记录时，本表外键值同步更新")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("插入数据到"),a("code",[s._v("eatery_order")]),s._v("表")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("insert into eatery_order values\n    (null, 7, 1),\n    (null, 11, 3),\n    (null, 11, 3),\n    (null, 20, 4),\n    (null, 7, 2),\n    (null, 7, 4);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("查询"),a("code",[s._v("eatery_order")]),s._v("表")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("+----+---------+--------+\n| id | money   | stu_id |\n+----+---------+--------+\n|  1 |  7.0000 |      1 |\n|  2 | 11.0000 |      3 |\n|  3 | 11.0000 |      3 |\n|  4 | 20.0000 |      4 |\n|  5 |  7.0000 |      2 |\n|  6 |  7.0000 |      4 |\n+----+---------+--------+\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"来感受置空和级联操作的魅力吧"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#来感受置空和级联操作的魅力吧"}},[s._v("#")]),s._v(" 来感受"),a("code",[s._v("置空")]),s._v("和"),a("code",[s._v("级联")]),s._v("操作的魅力吧")]),s._v(" "),a("h3",{attrs:{id:"置空"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#置空"}},[s._v("#")]),s._v(" 置空")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("删除"),a("code",[s._v("student")]),s._v("表中的一些记录：")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("delete from student where name='Emma';\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("查询"),a("code",[s._v("eatery_order")]),s._v("表")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("+----+---------+--------+\n| id | money   | stu_id |\n+----+---------+--------+\n|  1 |  7.0000 |      1 |\n|  2 | 11.0000 |      3 |\n|  3 | 11.0000 |      3 |\n|  4 | 20.0000 |   NULL |\n|  5 |  7.0000 |      2 |\n|  6 |  7.0000 |   NULL |\n+----+---------+--------+\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("可以看到在"),a("code",[s._v("eatery_order")]),s._v("表中，原本为"),a("code",[s._v("4")]),s._v("的"),a("code",[s._v("stu_id")]),s._v("，现在都变成了"),a("code",[s._v("null")]),s._v("。")])])]),s._v(" "),a("h3",{attrs:{id:"级联"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#级联"}},[s._v("#")]),s._v(" 级联")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("更新"),a("code",[s._v("student")]),s._v("表中的一些记录：")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("update student set stu_id=456 where stu_id=3;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("查询"),a("code",[s._v("eatery_order")]),s._v("表")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("+----+---------+--------+\n| id | money   | stu_id |\n+----+---------+--------+\n|  1 |  7.0000 |      1 |\n|  2 | 11.0000 |    456 |\n|  3 | 11.0000 |    456 |\n|  4 | 20.0000 |   NULL |\n|  5 |  7.0000 |      2 |\n|  6 |  7.0000 |   NULL |\n+----+---------+--------+\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("可以看到在"),a("code",[s._v("eatery_order")]),s._v("表中，原本为"),a("code",[s._v("3")]),s._v("的"),a("code",[s._v("stu_id")]),s._v("，现在都变成了"),a("code",[s._v("456")]),s._v("。")])])])])}),[],!1,null,null,null);e.default=t.exports}}]);