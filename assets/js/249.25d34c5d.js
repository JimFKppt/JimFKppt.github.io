(window.webpackJsonp=window.webpackJsonp||[]).push([[249],{748:function(e,s,a){"use strict";a.r(s);var t=a(21),r=Object(t.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"外键-foreign-key"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#外键-foreign-key"}},[e._v("#")]),e._v(" 外键 foreign key")]),e._v(" "),a("p",[e._v("表和表之间一旦有了关联之后，就变得麻烦了。")]),e._v(" "),a("h2",{attrs:{id:"作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#作用"}},[e._v("#")]),e._v(" 作用")]),e._v(" "),a("p",[e._v("在表和表之间建立联系。")]),e._v(" "),a("h2",{attrs:{id:"要点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#要点"}},[e._v("#")]),e._v(" 要点")]),e._v(" "),a("ul",[a("li",[e._v("本表中的外键参照其他表中的主键")]),e._v(" "),a("li",[e._v("外键的数据类型应该与所参照主键相同")]),e._v(" "),a("li",[e._v("外键可能是可以重复的，此时它的"),a("strong",[e._v("Key")]),e._v("为 "),a("code",[e._v("MUI")])]),e._v(" "),a("li",[e._v("外键字段的值不应该是其他表主键字段没有的")]),e._v(" "),a("li",[e._v("当其他表中主键字段的某个值被删掉、更新就会产生问题（涉及外键的三种操作）")]),e._v(" "),a("li",[e._v("要销毁两张表时，应先销毁外键所在的表")]),e._v(" "),a("li",[e._v("有"),a("strong",[e._v("并发")]),e._v("操作的项目中一般都是禁止使用外键的（企业规范）")]),e._v(" "),a("li",[e._v("删除外键需要使用"),a("strong",[e._v("外键别名")])])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("提示")]),e._v(" "),a("p",[a("code",[e._v("MUI")]),e._v(" 表示该字段的值是可重复的。")])]),e._v(" "),a("h2",{attrs:{id:"外键的添加、查看、删除"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#外键的添加、查看、删除"}},[e._v("#")]),e._v(" 外键的添加、查看、删除")]),e._v(" "),a("h3",{attrs:{id:"添加外键"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加外键"}},[e._v("#")]),e._v(" 添加外键")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("创建表时添加外键（第二张表）")]),e._v(" "),a("ol",[a("li",[e._v("第一张表")])]),e._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("create table test_1(\n\tstu_id int(4) primary key,\t# test_1表的主键\n    name varchar(30)\n\t);\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[e._v("第二张表")])]),e._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("create table test_2(\n    id int primary key,\n    money decimal(10,4),\n    stu_id int(4),\n    foreign key(stu_id) references test_1(stu_id);\t# 设置外键\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("其中")]),e._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("foreign key(<FieldName1>) references <TableName>(<FieldName2>);\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("解释：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("foreign key")]),e._v("：我要设置一个外键")]),e._v(" "),a("li",[a("code",[e._v("<FieldName1>")]),e._v("：这个外键在本表中叫啥名")]),e._v(" "),a("li",[a("code",[e._v("references")]),e._v("：它来自哪儿")]),e._v(" "),a("li",[a("code",[e._v("<TableName>(<FieldName2>)")]),e._v("：它来自"),a("code",[e._v("<TableName>")]),e._v("表中的"),a("code",[e._v("<FieldName2>")]),e._v("字段")])])]),e._v(" "),a("li",[a("p",[e._v("后期添加外键")]),e._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("alter table <TableName> add foreign key(<FieldName1>) references <TableName>(<FieldName2>);\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("解释同上。")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("提示")]),e._v(" "),a("p",[e._v("还是那句话，后期改变结构的情况是少之又少的。数据库都是设计好了再用SQL语句来实现的，哪像初学者设计数据库一上来就是SQL语句一顿操作猛如虎啊。")])])])]),e._v(" "),a("h3",{attrs:{id:"查看外键"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看外键"}},[e._v("#")]),e._v(" 查看外键")]),e._v(" "),a("p",[e._v("通过 "),a("code",[e._v("show create table <TableName>;")]),e._v(" 来查看外键。")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("提示")]),e._v(" "),a("p",[e._v("外键创建后，并不会在表结构中明示出来。")])]),e._v(" "),a("p",[a("strong",[e._v("外键别名")])]),e._v(" "),a("p",[e._v("每创建一个外键，都会自动生成一个别名。")]),e._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("CONSTRAINT `eatery_ibfk_1` FOREIGN KEY(`stu_id`) REFERENCES `test_1` (`stu_id`)；\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("code",[e._v("eatery_ibfk_1")]),e._v(" 为外键 "),a("code",[e._v("stu_id")]),e._v(" 的别名，一些操作要依赖于它，比如删除外键。")]),e._v(" "),a("blockquote",[a("p",[e._v("别名相关的内容，详见 "),a("a",{attrs:{href:"https://www.sjkjc.com/mysql/alias/",target:"_blank",rel:"noopener noreferrer"}},[e._v("MySQL别名"),a("OutboundLink")],1)])]),e._v(" "),a("h3",{attrs:{id:"删除外键"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除外键"}},[e._v("#")]),e._v(" 删除外键")]),e._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("alter table <TableName> drop foreign key <外键别名>;\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("如要删除 "),a("code",[e._v("test_2")]),e._v(" 这个表中的外键 "),a("code",[e._v("stu_id")]),e._v("，使用其别名 "),a("code",[e._v("eatery_ibfk_1")]),e._v("：")]),e._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("alter table test_2 drop foreign key eatery_ibfk_1;\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("注意")]),e._v(" "),a("p",[e._v("要删除外键必须使用"),a("strong",[e._v("外键别名")]),e._v("，别名可通过"),a("code",[e._v("show create table <FieldName>")]),e._v("来查看。")])])])}),[],!1,null,null,null);s.default=r.exports}}]);